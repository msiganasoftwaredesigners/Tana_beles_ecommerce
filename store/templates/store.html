{% extends 'base.html' %}
{% load static %}
{% block content %}

<section class="section-content padding-y">
    <div class="grid grid-cols-4 gap-2">
        <div class="col-span-1 bg-white h-screen fixed overflow-auto md:block hidden">
          <div class="p-6">
            {% for category in links %}
            <a
              class="block py-2 px-4 text-gray-700 hover:bg-gray-100 rounded"
              href="{{ category.get_url }}"
              data-category-slug="{{ category.category_slug }}"
              >{{ category.category_name }}</a
            >
            {% endfor %}
          </div>
        </div>
        <div class="col-span-4 md:pl-64">
            <main class="col-md-9">

                <div class="row">
                    {% if products %}
                    {% for product in products %}
                    <div class="col-md-4">
                        <figure class="card card-product-grid">

                            <a href="{{product.get_store_url}}" class="img-wrap">
                                {% with product.get_main_image as main_image %}
                                {% if main_image %}
                                    <img class="w-full h-full object-cover" src="{{ main_image.image.url }}" alt="{{ product.product_name }}">
                                {% endif %}
                            {% endwith %}</a>


                            <figcaption class="info-wrap">
                                <div class="fix-height">
                                    <a href="{{product.get_store_url}}" class="title">{{product.product_name}}</a>
                                    <div class="price-wrap mt-2">
                                        <span class="price">${{product.product_price}}</span>
                                        <del class="price-old">30%</del>
                                    </div> <!-- price-wrap.// -->
                                </div>
                                {% if single_product.product_stock <= 0 %}
                                <h5>out of stock </h5>
                                {% else %}
                                <a href="{{product.get_store_url}}" class="btn btn-block btn-primary">Product
                                    detail </a>
                                {% endif %}
                            </figcaption>
                        </figure>
                    </div> <!-- col.// -->
                    {% endfor %}
                    {% else %}
                    <div><h1> No result found</h1></div>
                    {% endif %}
                </div> <!-- row end.// -->


                <nav class="mt-4" aria-label="Page navigation sample">
                    {% if products.has_other_pages %}
                    <ul class="pagination">
                        {% if products.has_previous %}
                        <li class="page-item"><a class="page-link" href="?page={{ products.previous_page_number }}">Previous</a>
                        </li>
                        {% else %}
                        <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                        {% endif %}

                        {% for i in products.paginator.page_range %}
                        {% if products.number == i %}
                        <li class="page-item active"><a class="page-link" href="#">{{i}}</a></li>
                        {% else %}
                        <li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
                        {% endif %}
                        {% endfor %}
                        {% if products.has_next %}
                        <li class="page-item"><a class="page-link" href="?page={{products.next_page_number}}">Next</a>
                        </li>
                        {% else %}
                        <li class="page-item"><a class="page-link" href="#">Next</a></li>
                        {% endif %}

                    </ul>
                    {% endif %}
                </nav>

            </main> <!-- col.// -->

        </div>

    </div> <!-- container .//  -->
</section>
{% endblock %}


<div class="col-md-3">
    <div class="card card-product-grid">
        <a href="{{product.get_store_url}}" class="img-wrap"> <img src="{{product.product_images.url}}">
        </a>
        <figcaption class="info-wrap">
            <a href="{{product.get_store_url}}" class="title">{{product.product_name}}</a>
            <a href="{{product.get_store_url}}" class="title">{{product.product_description}}</a>
            <div class="price mt-1 text-blue-400 text-4xl">{{ product.product_price }}birr</div>
        </figcaption>
    </div>
</div>